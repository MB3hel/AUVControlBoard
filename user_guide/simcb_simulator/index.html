<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://mb3hel.github.io/AUVControlBoard/user_guide/simcb_simulator/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Using SimCB and Simulator - AUV Control Board</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Using SimCB and Simulator";
        var mkdocs_page_input_path = "user_guide/simcb_simulator.md";
        var mkdocs_page_url = "/AUVControlBoard/user_guide/simcb_simulator/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> AUV Control Board
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">User Guide</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../preparing_board/">Preparing a Control Board</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../general_use/">Using Control Board</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pythoniface/">Using the Python Interface</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Using SimCB and Simulator</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#simcb">SimCB</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#simulator">Simulator</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#combining-simcb-and-simulator">Combining SimCB and Simulator</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#ways-to-access-control-board">Ways to access Control Board</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#advanced-use-cases">Advanced use Cases</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../calibration/">Sensor Calibration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../comm_protocol/">Communication Protocol</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../messages/">Messages</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Hardware</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../hardware/v1/">Version 1</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../hardware/v2/">Version 2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../hardware/sensors/">Off-Board Sensors</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Developers</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../devs/overview/">Firmware Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../devs/details/">Firmware Details</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../devs/simulation/">Simulation Support</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../devs/build/">Build and Flash Firmware</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../devs/buildsimcb/">Build and Run SimCB</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../devs/pythoniface/">Interface Scripts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../devs/developing/">Development Workflows</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../devs/math/">Math</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">AUV Control Board</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">User Guide</li>
      <li class="breadcrumb-item active">Using SimCB and Simulator</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/MB3hel/AUVControlBoard/blob/main/docs/docs/user_guide/simcb_simulator.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="using-simcb-and-simulator">Using SimCB and Simulator</h1>
<p>TODO: Details and improvements in various sections.</p>
<p>TODO: Add port number info.</p>
<h2 id="simcb">SimCB</h2>
<p>SimCB is a version of the control board firmware which is built as a binary that runs on Windows, macOS, or Linux. By running this binary, you can run the control board firmware on your computer without having a physical control board.</p>
<p>SimCB only supports simulator hijack mode (meaning only the sim IMU and depth sensors will work and thruster speeds will be reported back over comms interface). Instead of communicating with a physical control board via UART, you communicate with SimCB via TCP (the exact same messages are sent, just treat what you send over UART and TCP as byte streams). SimCB is a TCP server so code connecting to SimCB must be a TCP client.</p>
<p>TODO: How to use SimCB instead of real control board over uart (including instructions to run SimCB)</p>
<p>Using SimCB allows testing various aspects of communication with the control board and system behavior without having a physical control board.</p>
<h2 id="simulator">Simulator</h2>
<p>The <a href="https://github.com/MB3hel/GodotAUVSim">simulator</a> is a program that runs on your computer and models a vehicle in 3D space. The simulator hijacks a control board and provides the control board "fake" sensor data from the simulated environment. The control board then provides the simulator motor speeds so the simulator can move the vehicle appropriately in the simulated environment. When in this mode, user code should communicate with the simulator over TCP instead of communicating with the control board directly.</p>
<p>See the simulator's <a href="https://github.com/MB3hel/GodotAUVSim/blob/main/README.md">README</a> for a description of how to communicate with the simulator. Note that the python iface scripts have builtin support for using the simulator.</p>
<p>The provided simulator (linked above) is fairly simple, and is mostly intended for development testing of the control board firmware. However, it can be useful to end users as well to see how the vehicle is expected to behave. Note thought that the environment provided in this simulator is very limited. For more complex use cases, users may wish to fork and adapt the simulator to their vehicles / use cases.</p>
<p>TODO: Instructions to run simulator and connect to real control board.</p>
<h2 id="combining-simcb-and-simulator">Combining SimCB and Simulator</h2>
<p>By combining the simulator (providing a simulated vehicle and environment) with SimCB (providing a control board without hardware), it is possible to test vehicle motion without any hardware (no vehicle in water and no real control board).</p>
<p>TODO: Instructions to run the simulator and connect to SimCB</p>
<h2 id="ways-to-access-control-board">Ways to access Control Board</h2>
<p>There are four general ways to use the control board</p>
<ol>
<li>
<p>Directly using a real control board over UART (via USB)</p>
</li>
<li>
<p>Directly using SimCB over TCP</p>
</li>
<li>
<p>Using the simulator attached to a real control board (talking to the simulator over TCP)</p>
</li>
<li>
<p>Using the simulator attached to SimCB (talking to the simulator over TCP)</p>
</li>
</ol>
<p><img alt="" src="../img/control_board_modes.jpg" /></p>
<p>TODO: Discussion of these methods and when they are useful</p>
<h2 id="advanced-use-cases">Advanced use Cases</h2>
<ol>
<li>
<p>End users can implement functionality in their own simulators to "hijack" a control board for simulation (referred to as "simhijack") just as the provided simulator does. When a control board is simhijacked, it does not use real sensors or create PWM signals for real thrusters. Instead, it communicates with a simulator. The control board gives the simulator motor speeds and the simulator is expected to provide the control board with sensor data. The protocol for doing so is fairly simple (see <a href="../messages/">messages</a> documentation) allowing end users to incorporate a control board into their own vehicle simulations.</p>
</li>
<li>
<p>End users may want to design unit tests that require communicating with a control board and validating motion. Unit test code can simhijack either a physical board or SimCB (probably more useful to use SimCB) and provide specific sensor inputs and commands and validate the motor outputs are as expected.</p>
</li>
</ol>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../pythoniface/" class="btn btn-neutral float-left" title="Using the Python Interface"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../calibration/" class="btn btn-neutral float-right" title="Sensor Calibration">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/MB3hel/AUVControlBoard" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../pythoniface/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../calibration/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../js/mathjax.js"></script>
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
