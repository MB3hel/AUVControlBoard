
/**
 * @file i2c0.h
 * 
 * Implementation for i2c0 asynchronous master with queued transactions
 * 
 * @author Marcus Behel
 */


#pragma once

#include <util.h>


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// Globals
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// Pointer to transaction that is done (only valid after I2C0_DONE FLAG set before new transaction started)
i2c_trans *i2c0_done_trans;


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// Functions
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/**
 * Initialize i2c0 bus
 */
void i2c0_init(void);

/**
 * Start a transaction
 * @param trans The transaction to start. Object pointed to must remain in scope
 *              for duration of the transaction.
 */
void i2c0_start(i2c_trans *trans);
