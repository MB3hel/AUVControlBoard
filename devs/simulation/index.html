<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://mb3hel.github.io/AUVControlBoard/devs/simulation/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Simulation Support - AUV Control Board</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Simulation Support";
        var mkdocs_page_input_path = "devs/simulation.md";
        var mkdocs_page_url = "/AUVControlBoard/devs/simulation/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> AUV Control Board
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">User Guide</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../user_guide/preparing_board/">Preparing a Control Board</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user_guide/general_use/">Using Control Board</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user_guide/pythoniface/">Using the Python Interface</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user_guide/simcb_simulator/">Using SimCB and Simulator</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user_guide/calibration/">Sensor Calibration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user_guide/comm_protocol/">Communication Protocol</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user_guide/messages/">Messages</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Hardware</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../hardware/v1/">Version 1</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../hardware/v2/">Version 2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../hardware/sensors/">Off-Board Sensors</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Developers</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../overview/">Firmware Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../details/">Firmware Details</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Simulation Support</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#simcb">SimCB</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#simulation-hijack">Simulation Hijack</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#simulator-implementation-development">Simulator Implementation &amp; Development</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#control-board-setups">Control Board Setups</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../build/">Build and Flash Firmware</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../buildsimcb/">Build and Run SimCB</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pythoniface/">Interface Scripts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../developing/">Development Workflows</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../math/">Math</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">AUV Control Board</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Developers</li>
      <li class="breadcrumb-item active">Simulation Support</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/MB3hel/AUVControlBoard/blob/main/docs/docs/devs/simulation.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="simulation">Simulation</h1>
<h2 id="simcb">SimCB</h2>
<p>SimCB is the name used for the control board firmware built as a binary to run on a PC operating system (Windows, macOS, Linux). This is achieved using the FreeRTOS windows or posix ports. Instead of using UART over USB (as real hardware does), SimCB opens TCP sockets (server) for communication. The code using the control board would then connect to this socket (as a client) instead of opening a UART port to talk with a physical control board. The communication protocol (message structure and format) is exactly the same as described for UART.</p>
<p>The SimCB allows a control board to run without hardware. The same firmware that would run on the board instead runs on your PC. There are a few limitations with this. SimCB will only operate in simhijack mode (it cannot be released from simhijack) and only the sim sensors will be available.</p>
<p>TODO: Details on where this code lives, how TCP is handled and why.</p>
<h2 id="simulation-hijack">Simulation Hijack</h2>
<p>TODO: Simhijack and support for this in firmware (including multiple sensor stuff)</p>
<p>TODO: Why? Allow a simulated environment to use a control board to actually control a simulated vehicle. Allows motion testing / validation without in-water time (with a real control board). Also allows debugging / testing actual firmware without in-water time with a vehicle.</p>
<p>TODO: By combining with SimCB (which can also be simhijacked), motion can be tested without in-water time and without a real control board.</p>
<h2 id="simulator-implementation-development">Simulator Implementation &amp; Development</h2>
<p>The simulator is implemented using the Godot game engine (3.5). This provides a 3D rendering and physics engine.</p>
<p><a href="https://github.com/MB3hel/GodotAUVSim">GodotAUVSim on GitHub</a></p>
<p>This simulator was initially designed to allow control board firmware development without in-water testing time with a physical vehicle. It has expanded into a reference simulator for end user use. It does not model any environment, just the vehicle(s).</p>
<p>TODO: Implementation details / tech docs</p>
<p>TODO: Docs on adding vehicles, etc</p>
<h2 id="control-board-setups">Control Board Setups</h2>
<p>Thus, there are four ways a "control board" can be used</p>
<ul>
<li>Real control board over UART</li>
<li>SimCB over TCP</li>
<li>Simulator models environment and provides inputs to control board and retrieves outputs from control board<ul>
<li>Can also do this with SimCB. Simulator is a "man in the middle"</li>
</ul>
</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../details/" class="btn btn-neutral float-left" title="Firmware Details"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../build/" class="btn btn-neutral float-right" title="Build and Flash Firmware">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/MB3hel/AUVControlBoard" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../details/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../build/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../js/mathjax.js"></script>
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
